<view class="container">
  <view class="number f20 padding2 border_bottom">
    共有{{}}包可提
  </view>
  <view class="checkout">
    <view wx:for="{{data}}" wx:key="id">
      <view>{{item.name}}</view>
      <view>
        <block wx:for="{{item.userECouponsInfoDtoList}}" wx:key="id" wx:for-item="zItem">
          <image src="/resources/images/member/nbs.jpg" data-id="{{item.id+'_'+zItem.ecouponsId}}" data-name="{{item.name+'_'+zItem.ecouponsName}}" data-count="{{zItem.ecouponsCnt}}" bindtap="select"></image>
        </block>
      </view>
    </view>
  </view>
  <view class="address padding2 border_bottom overtwo">
    收货地址：安徽省合肥市中绿广场
  </view>
  <view class="selectedList">
    <block wx:for="{{selectList}}" wx:key="id">
      <view class="selected lineItem border_bottom">
        <view class="left clr_lightGray">
          <image src='../../../resources/images/member/nbs.jpg'></image>
        </view>
        <view class="center">
          <view class='f16'>规格：XL</view>
          <view class='f12 clr_lightGray buyType'>自行购买</view>
        </view>
        <view class="right amount">
          <button>-</button>
          <input value="0" class="f12" type="number" />
          <button>+</button>
        </view>
      </view>
    </block>
  </view>
  <view class="buy f16">
    <view class='buyAmount'>实付款：8元</view>
    <view class='buySubmit'>结算</view>
  </view>

  <view class="actionMask" catchtouchmove="catchActionMask" hidden="{{!showAction}}" bindtap="toggleMask"></view>
  <view class="actionContent" hidden="{{!showAction}}">
    <view class="actionTitle border_bottom lineItem">
      <view class="left">
        <image src="{{selectData.thumbnail}}"></image>
      </view>
      <view class="center f14">
        <!-- <view class="f16 clr_orange bold">￥{{selectData.price}}</view> -->
        <view>库存{{selectData.count}}件</view>
        <view>已选
          <text class="clr_orange">{{selectData.name}} {{selectData.num}}包</text>
        </view>
      </view>
      <view class="right" bindtap="toggleMask">
        <image src="/resources/images/icon/close.png"></image>
      </view>
    </view>
    <wxs module="canClickFn">
      module.exports = function(arr, id, selectArr) {
        if (selectArr.length == 1) {
          return true;
        }
        if (!arr) {
          return false;
        }
        for (var i = 0; i < arr.length; i++) {
          if (arr[i] == id) {
            return true;
          }
        }
        return false;
      }
    </wxs>
    <view class="actionSpecifications border_bottom">
      <block wx:for="{{specification.all}}" wx:key="id" wx:for-index="idx">
        <view class="actionItemTitle f16" data-id="{{item.id}}">{{item.name}}：</view>
        <view class="actionItemBtn f16">
          <block wx:for="{{item.specificationValues}}" wx:for-item="citem" wx:key="id">
            <text bindtap="checkout" class="{{selectArr[idx] == citem.id?'active':''}} {{canClickFn(canClick[selectArr[1-idx]],citem.id,selectArr)?'canTap':'' }}" data-idx="{{idx}}" data-can="{{canClickFn(canClick[selectArr[1-idx]],citem.id,selectArr)}}" data-id="{{citem.id}}">{{citem.name}}</text>
          </block>
        </view>
      </block>
    </view>
    <view class="actionNumber border_bottom lineItem" style="align-items:center;">
      <view class="f16 ">提货数量:</view>
      <view class="amount">
        <button data-type="reduce" bindtap="revisenum">-</button>
        <input class="f12 " type="number " data-type="input" bindchange="revisenum" value="{{selectData.num}}" />
        <button data-type="add" bindtap="revisenum">+</button>
      </view>
    </view>
    <button class="defaultBtn " bindtap="paySubmit">确认</button>
  </view>
</view>